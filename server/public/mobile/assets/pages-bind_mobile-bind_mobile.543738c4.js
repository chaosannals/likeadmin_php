import{d as e,a0 as a,z as l,af as o,G as t,o as r,g as s,e as d,w as i,l as u,j as n,t as m,F as c,ap as p,aq as b,aS as f,aA as x,r as _,a as g,p as h,P as v}from"./index.29acdabd.js";import{_ as y}from"./page-meta.27f77783.js";import{_ as j}from"./u-input.198a490b.js";import{_ as k}from"./u-verification-code.bfcdaba6.js";import{_ as w}from"./u-button.f1d84ef1.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";import"./u-icon.fce5c7bf.js";import"./emitter.5b880544.js";var $=V(e({__name:"bind_mobile",setup(e){const V=a(),$=l(""),C=o(),S=e=>{$.value=e},I=t({type:"bind",mobile:"",code:""}),B=async()=>{var e,a;if(!I.mobile)return uni.$u.toast("请输入手机号码");(null==(e=V.value)?void 0:e.canGetCode)&&(await p({scene:b.BIND_MOBILE,mobile:I.mobile}),uni.$u.toast("发送成功"),null==(a=V.value)||a.start())},G=async()=>I.mobile?I.code?(await f(I,{token:C.temToken}),uni.$u.toast("绑定成功"),C.login(C.temToken),void x()):uni.$u.toast("请输入验证码"):uni.$u.toast("请输入手机号码");return(e,a)=>{const l=_(g("page-meta"),y),o=h,t=_(g("u-input"),j),p=_(g("u-verification-code"),k),b=v,f=_(g("u-button"),w);return r(),s(c,null,[d(l,{"page-style":e.$theme.pageStyle},null,8,["page-style"]),d(o,{class:"bg-white min-h-full flex flex-col items-center px-[40rpx] pt-[40rpx] box-border"},{default:i((()=>[d(o,{class:"w-full"},{default:i((()=>[d(o,{class:"text-2xl font-medium mb-[60rpx]"},{default:i((()=>[u("绑定手机号")])),_:1}),d(o,{class:"px-[18rpx] border border-solid border-lightc border-light rounded-[10rpx] h-[100rpx] items-center flex"},{default:i((()=>[d(t,{class:"flex-1",modelValue:I.mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>I.mobile=e),border:!1,placeholder:"请输入手机号码"},null,8,["modelValue"])])),_:1}),d(o,{class:"px-[18rpx] border border-solid border-lightc border-light rounded-[10rpx] h-[100rpx] items-center flex mt-[40rpx]"},{default:i((()=>[d(t,{class:"flex-1",modelValue:I.code,"onUpdate:modelValue":a[1]||(a[1]=e=>I.code=e),placeholder:"请输入验证码",border:!1},null,8,["modelValue"]),d(o,{class:"border-l border-solid border-0 border-light pl-3 leading-4 ml-3 w-[180rpx]",onClick:B},{default:i((()=>[d(p,{ref_key:"uCodeRef",ref:V,seconds:60,onChange:S,"change-text":"x秒"},null,512),d(b,{class:n(I.mobile?"text-primary":"text-muted")},{default:i((()=>[u(m($.value),1)])),_:1},8,["class"])])),_:1})])),_:1}),d(o,{class:"mt-[40rpx]"},{default:i((()=>[d(f,{type:"primary","hover-class":"none",customStyle:{height:"100rpx",opacity:I.mobile&&I.code?"1":"0.5"},onClick:G},{default:i((()=>[u(" 确定 ")])),_:1},8,["customStyle"])])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-6bd69078"]]);export{$ as default};
