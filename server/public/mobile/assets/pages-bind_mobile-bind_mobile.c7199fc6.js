import{d as e,a1 as a,z as o,ag as t,G as l,o as r,g as s,e as u,w as d,l as i,t as m,F as n,ap as c,aq as p,aR as f,aA as b,r as _,a as x,p as g}from"./index.3fa91c6a.js";import{_ as v}from"./page-meta.fe249fc8.js";import{_ as h}from"./u-input.bc5c8ae9.js";import{_ as j}from"./u-form-item.1d5af1c7.js";import{_ as y}from"./u-verification-code.d281bdca.js";import{_ as w}from"./u-form.5ed69b0d.js";import{_ as k}from"./u-button.7f939963.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";import"./u-icon.d2ce6c2b.js";import"./emitter.5b880544.js";var $=V(e({__name:"bind_mobile",setup(e){const V=a(),$=o(""),B=t(),C=e=>{$.value=e},I=l({type:"bind",mobile:"",code:""}),T=async()=>{var e,a;if(!I.mobile)return uni.$u.toast("请输入手机号码");(null==(e=V.value)?void 0:e.canGetCode)&&(await c({scene:p.BIND_MOBILE,mobile:I.mobile}),uni.$u.toast("发送成功"),null==(a=V.value)||a.start())},G=async()=>I.mobile?I.code?(await f(I,{token:B.temToken}),uni.$u.toast("绑定成功"),B.login(B.temToken),void setTimeout((()=>{b()}),1500)):uni.$u.toast("请输入验证码"):uni.$u.toast("请输入手机号码");return(e,a)=>{const o=_(x("page-meta"),v),t=_(x("u-input"),h),l=_(x("u-form-item"),j),c=_(x("u-verification-code"),y),p=g,f=_(x("u-form"),w),b=_(x("u-button"),k);return r(),s(n,null,[u(o,{"page-style":e.$theme.pageStyle},null,8,["page-style"]),u(p,{class:"bg-white min-h-full flex flex-col items-center px-[40rpx] pt-[40rpx] box-border"},{default:d((()=>[u(p,{class:"w-full"},{default:d((()=>[u(f,{borderBottom:"","label-width":150},{default:d((()=>[u(l,{label:"手机号",borderBottom:""},{default:d((()=>[u(t,{class:"flex-1",modelValue:I.mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>I.mobile=e),border:!1,placeholder:"请输入手机号码"},null,8,["modelValue"])])),_:1}),u(l,{label:"验证码",borderBottom:""},{default:d((()=>[u(t,{class:"flex-1",modelValue:I.code,"onUpdate:modelValue":a[1]||(a[1]=e=>I.code=e),placeholder:"请输入验证码",border:!1},null,8,["modelValue"]),u(p,{class:"border-l border-solid border-0 border-light pl-3 text-muted leading-4 ml-3 w-[180rpx]",onClick:T},{default:d((()=>[u(c,{ref_key:"uCodeRef",ref:V,seconds:60,onChange:C,"change-text":"x秒"},null,512),i(" "+m($.value),1)])),_:1})])),_:1})])),_:1}),u(p,{class:"mt-[40rpx]"},{default:d((()=>[u(b,{type:"primary",shape:"circle",onClick:G},{default:d((()=>[i(" 确定 ")])),_:1})])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-43da565a"]]);export{$ as default};
